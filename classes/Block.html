<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>likeliHUD</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>likeliHUD</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_Block">Class Block </a></li>
<li><a href="#User_defined_blocks">User defined blocks </a></li>
</ul>


<h2>Classes</h2>
<ul class="nowrap">
  <li><strong>Block</strong></li>
  <li><a href="../classes/Layout.html">Layout</a></li>
  <li><a href="../classes/Rectangle.html">Rectangle</a></li>
  <li><a href="../classes/Image.html">Image</a></li>
  <li><a href="../classes/Stack.html">Stack</a></li>
  <li><a href="../classes/Label.html">Label</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/README.md.html">README</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/fill.lua.html">fill.lua</a></li>
  <li><a href="../examples/layout.lua.html">layout.lua</a></li>
  <li><a href="../examples/o.lua.html">o.lua</a></li>
  <li><a href="../examples/simple.lua.html">simple.lua</a></li>
  <li><a href="../examples/squares.lua.html">squares.lua</a></li>
  <li><a href="../examples/start.lua.html">start.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Class <code>Block</code></h1>
<p><strong>START HERE</strong>.</p>
<p> Parent of every element in the system.</p>

<p> <strong>Introduction</strong></p>

<p> (words/letters in <strong>bold</strong> in this section refer to the ones in the Fig. 1 below)</p>

<ul>
    <li>A <em>block</em> is used to denote an element of a graphical user interface in this library
    (<strong>BLOCK</strong>), another famous name for this is <em>widget</em> but I will be using <em>element</em> / <em>block</em>
    interchangeable here.</li>
    <li>The coordinate system as it is in
    <a href="https://www.love2d.org/wiki/love.graphics">love2d</a>.</li>
    <li>A <em>rectangle</em> we define by the coordinate of its upper-left corner and its width
and height. I.e. it is a tuple (x, y, w, h).
In Lua a rectangle would be a table with 4 keys <code>x, y, w, h</code>:

<pre>
<span class="keyword">local</span> rectangle = {
  x = <span class="number">10</span>,
  y = <span class="number">20</span>,
  w = <span class="number">100</span>,
  h = <span class="number">50</span>,
}
</pre>
</li>
    <li>The <em>enclosing cell</em> of a block is a rectangle which the block is placed in, <strong>(X, Y, W, H)</strong>
    . In order to place the block use its <a href="../classes/Block.html#block:place">place</a> method. <em>NOTE:</em> you are
    not supposed to use this method on every block in your GUI, you usually call it once on the root
    block. See <a href="../classes/Layout.html#">Layout</a>. So placing an element on the screen requires not only the
    coordinate but the whole rectangle. <em>NOTE:</em> <a href="../classes/Block.html#block:place">place</a> itself doesn't draw anything. Use the
    block's <a href="../classes/Block.html#block:draw">draw</a> method to actually draw it.</li>
</ul>

<p> <code>likeliHUD</code> was created with the following objectives:</p>

<ul>
    <li>Declarative construction (similar to QML)</li>
    <li>Everything is a rectangle</li>
    <li>Automatic layout (but see the <code>offset</code> parameter below)</li>
</ul>

<p> A typical user workflow consists of at least 3 steps when using this library</p>

<ul>
    <li>Create</li>
    <li>Place</li>
    <li>Draw</li>
</ul>

<p> <strong>Create</strong></p>

<p> <em>Declarative construction</em> means you create a <em>block tree</em> which represents your UI.
 Blocks can have properties and embedded (children) blocks.
 <em>Properties</em> go in the hash part of the block (in the end every block is a Lua table)
 i.e. key-value pairs; <em>children</em> elements is the array part of the block. However, see the
 <code>on</code> property in the description of the <a href="../classes/Block.html#block:new">new</a> method. A simple example of
 an object tree which has the following diagram (properties and their values are written in the
 parentheses)</p>


<pre>
<span class="function-name">A1</span> (a: <span class="number">1</span>)
├───<span class="function-name">B1</span> (b: <span class="number">2</span>)
│   ├───<span class="function-name">B2</span> (b: <span class="number">3</span>)
│   ├───<span class="function-name">B3</span> (b: <span class="number">4</span>)
│   ├───<span class="function-name">B4</span> (b: <span class="number">5</span>)
│
├───<span class="function-name">C1</span> (c: <span class="number">1</span>)
    ├───<span class="function-name">C2</span> (c: <span class="number">2</span>)
</pre>

<p> can be created with the following code:</p>


<pre>
<span class="keyword">local</span> root = <span class="function-name">A1</span> {
  a = <span class="number">1</span>,

  <span class="function-name">B1</span> {
    b = <span class="number">2</span>,

    <span class="function-name">B2</span> {
      b = <span class="number">3</span>,
    },

    <span class="function-name">B3</span> {
      b = <span class="number">4</span>,
    },

    <span class="function-name">B4</span> {
      b = <span class="number">5</span>,
    },
  },

  <span class="function-name">C1</span> {
    c = <span class="number">1</span>,

    <span class="function-name">C2</span> {
      c = <span class="number">2</span>,
    }
  }
}
</pre>

<p> <strong>Place</strong></p>

<p> This library treats every block (<strong>BLOCK</strong>) as a rectangle of some width <strong>a</strong> and
 height <strong>b</strong>
 placed inside its enclosing cell <strong>(X, Y, W, H)</strong>. It may also have some pads <strong>pad</strong> and/or
 offset <strong>(Xo, Yo, Wo, Ho)</strong>.
 Below you can see a figure which we'll be referring to in this documentation a lot:</p>


<pre>
Fig.<span class="number">1</span>
                     Enclosing cell
                           ┆
                           ┆       offset
                           ┆          ┆
(X, Y)                     ▼          ┆
  ■───────────────────────────────────┆────────────────────╮
  │          ▲                        ┆                    │
  │          Yo                       ┆                    │
  │          ▼                        ▼                    │
  │       ■──────────────────────────────────┬──────╮      │
  │       │              ▲                   │      │      │
  │◀︎ Xo  ▶︎│             Pad                  │      │      │
  │       │   (Xs, Ys)   ▼                   │      │      │
  │       │       ■──────────────────╮       │      │      │
  │       │       │                  │       │      │      │
  │       │◀︎ Pad ▶︎│      BLOCK       b       B      │      │
  │       │       │                  │       │      Ho     H
  │       │       ╰────────a─────────╯       │      │      │
  │       │                                  │      │      │
  │       │                                  │      │      │
  │       │                                  │      │      │
  │       ├─────────────────A────────────────╯      │      │
  │       │                                         │      │
  │       ╰───────────────────Wo────────────────────╯      │
  │                                                        │
  │                                                        │
  │                                                        │
  ╰───────────────────────────W────────────────────────────╯
</pre>

<p> This is the code that corresponds to the figure:</p>


<pre>
<span class="keyword">local</span> BLOCK = ui.<span class="function-name">Rectangle</span> {
  w = a,
  h = b,

  offset = {
    x = Xo,
    y = Yo,
    w = Wo,
    h = Ho,
  },

  pad = Pad,
}

BLOCK:<span class="function-name">place</span>(X, Y, W, H)
</pre>

<p> One more time: to place an element you call its <a href="../classes/Block.html#block:place">place</a> method with the enclosing cell as an
 argument (actually it is 4 arguments, but you get the idea). Don't be afraid - you are not
 going to call this method on each element in your UI - usually only the root element is placed
 explicitly.</p>

<p> <strong>Draw</strong></p>

<p> In order to draw an element call its <a href="../classes/Block.html#block:draw">draw</a> method. Similarly to <a href="../classes/Block.html#block:place">place</a> you usually call it
 once (per frame) for the root element.</p>

<p> See below for details.</p>


<h2><a href="#Class_Block">Class Block </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#block:new">block:new ()</a></td>
	<td class="summary">Constructor.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#block:size">block:size (includePad)</a></td>
	<td class="summary">Returns the size of the block.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#block:cell">block:cell ()</a></td>
	<td class="summary">Enclosing cell.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#block:place">block:place (x, y, w, h)</a></td>
	<td class="summary">Places the block within specified enclosing cell.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#block:draw">block:draw ()</a></td>
	<td class="summary">Draws the block.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#block:traverse">block:traverse ()</a></td>
	<td class="summary">Block iterator.</td>
	</tr>
</table>
<h2><a href="#User_defined_blocks">User defined blocks </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#block:doDraw">block:doDraw ()</a></td>
	<td class="summary">A block must override this function to be drawn.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#block:doPlace">block:doPlace (x, y, w, h)</a></td>
	<td class="summary">Placement.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header has-description"><a name="Class_Block"></a>Class Block </h2>

          <div class="section-description">
          Represents a <em>block</em>.
          </div>
    <dl class="function">
    <dt>
    <a name = "block:new"></a>
    <strong>block:new ()</strong>
    </dt>
    <dd>

<p>Constructor.
 The user is not supposed to explicitly call this method. It's called automatically when an
 instance of Block is created. See <a href="https://lrdprdx.github.io/lua-class/">here</a> for details.
 When created a block can be given properties. The list of the properties below is common for
 all blocks in this library. <em>NOTE:</em> though can be given some properties might be ignored by
 a block either because of the type of the block and/or different circumstances. F.e. the
 <code>fill</code> property only makes sense when the block is placed inside a <a href="../classes/Layout.html#">Layout</a>.</p>

<ul>
    <li><p><code>visible</code> : boolean.
    <code>true</code> (default) means the element is visible (drawn). Otherwise it is not visible</p></li>
    <li><p><code>color</code>: a color like in <a href="https://www.love2d.org/wiki/love.graphics.setColor">love2d</a>
    (the table variant). For different type of a block it has different meaning. See concrete
    type. Default is nil.</p></li>
    <li><p><code>pad</code> : a non-negative number. The minimum gap between the block's border and the
    enclosing cell (see Fig. 1). It can be greater than the pad because of the
    <code>offset</code> parameter. <em>NOTE:</em> the pad along the x-axis is eqaul to the pad
    along the y-axis.</p></li>
    <li><p><code>align</code> : Alignment of the block inside its enclosing cell.
A string containing one or two words
<code>&apos;center&apos;</code> (default), <code>&apos;top&apos;, &apos;bottom&apos;, &apos;left&apos;, &apos;right&apos;</code> delimited by the <code>+</code> sign. For example,
<code>&apos;top+right&apos;</code> (equivalent to <code>&apos;right+top&apos;</code>).
<em>NOTE:</em> this string must be consistent: it doesn't make sense to have something
like <code>&apos;top+bottom&apos;</code> (<code>&apos;top&apos;</code> will be set), or <code>&apos;left+right&apos;</code> (<code>&apos;right&apos;</code> will be set). In other
words there are only 9 options of alignment (* means default):</p>

<pre><code>Fig.2

╭────────────────┬────────────┬────────────────╮
│ top + left     │    top     │    top + right │
│                │            │                │
│                │            │                │
├────────────────┼────────────┼────────────────┤
│                │            │                │
│ left           │   center*  │          right │
│                │            │                │
├────────────────┼────────────┼────────────────┤
│                │            │                │
│                │            │                │
│ bottom + left  │   bottom   │ bottom + right │
╰────────────────┴────────────┴────────────────╯
</code></pre></li>
    <li><p><code>fill</code> : a table of the form <code>{ x = boolean, y = boolean }</code>. Tells whether the block should
    occupy free space (along the corresponding axis) if placed inside a Layout. See <a href="../classes/Layout.html#layout:new">Layout:new</a>.</p></li>
    <li><p><code>offset</code> : a rectangle <strong>(Xo, Yo, Wo, Ho)</strong>. Modifies the enclosing cell (X, Y, W, H) of
the element (which was given by calling the <a href="../classes/Block.html#block:place">place</a> method) by adding (Xo, Yo) to (X, Y) and
overriding (W, H) by (Wo, Ho).
In other words, placing the element with the <code>offset</code> field (Xo, Yo, Wo, Ho) inside
the cell (X, Y, W, H) is the same as placing this element inside the
cell (X + Xo, Y + Yo, Wo, Ho). See Fig. 1.
Usually used together with the <code>on</code> element (see below).</p>

<pre><code>-- Rectangle is a Block
local element = ui.Rectangle {
  w = 100,
  h = 100,

  offset = {
    x = 10,
    y = 20,
    w = 200,
    h = 200,
  }
}

element:place(10, 10, 300, 300) -- actually placed in (20, 30, 200, 200)
</code></pre></li>
    <li><p><code>on</code> : a block. Special property which value must be a block. Let us explain the meaning of
the <code>on</code> property looking at the following example:</p>

<pre><code>local UI = ui.Rectangle {
  id = 'A'

  w = 100,
  h = 50,

  on = {
    ui.Rectangle { -- the enclosing cell of this element is A itself
      id = 'B',

      w = 60,
      h = 30,
    }
  }
}

UI:place(20, 20, 200, 200)
</code></pre>
<p>which produces the following diagram:</p>

<pre><code>Fig.3

                      Enclosing cell of A
                             ┆
                             ┆
                             ┆  Enclosing cell of B
(0, 0)                       ┆       ┆
  ■──────────────────────────┆───────┆─────────────────╮
  │          ▲               ┆       ┆                 │
  │          20              ┆       ┆                 │
  │          ▼               ▼       ┆                 │
  │       ■──────────────────────────┆──────────╮      │
  │       │                          ┆          │      │
  │◀︎ 20  ▶︎│                          ┆          │      │
  │       │                          ▼          │      │
  │       │       ╭────────────────────╮        │      │
  │       │       │A                   │        │      │
  │       │       │   ╭────────────╮   │        │      │
  │       │       │   │B           │  50        │      │
  │       │       │   │           30   │       200     H (screen)
  │       │       │   ╰─────60─────╯   │        │      │
  │       │       │                    │        │      │
  │       │       ╰────────100─────────╯        │      │
  │       │                                     │      │
  │       │                                     │      │
  │       │                                     │      │
  │       ╰───────────────────200───────────────╯      │
  │                                                    │
  │                                                    │
  │                                                    │
  ╰───────────────────────────W (screen)───────────────╯
</code></pre>
<p>as you can see now the enclosing cell of <strong>B</strong> is <strong>A</strong> itself, namely, (A.x, A.y, A.w, A.h).
In other words <strong>B</strong> is automatically placed <em>inside</em> <strong>A</strong>. This property together with the
<code>offset</code> one makes it possible to integrate elements (usually <a href="../classes/Label.html#">Label</a>) into images. F.e.,
suppose you drew a health bar image:</p>

<pre><code>╭─────────────────╮
│■───────────────■│◀︎- cool health bar image
││ area for text ││
│■───────────────■│
╰─────────────────╯
</code></pre>
<p>and you want the text showing the health is always centered inside this image wherever
the bar is placed. All you need is to place a <a href="../classes/Label.html#">Label</a> inside this image with the right offset:</p>

<pre><code>local hp = ui.Image {
  path = 'path/to/image.png',

  on = {
    ui.Label {
      text = '100',
      offset = {
        -- area for text
      }
    }
  }
}
</code></pre>
<p>Now wherever <code>hp</code> is placed the text inside it is placed correctly automatically.</p></li>
</ul>








</dd>
    <dt>
    <a name = "block:size"></a>
    <strong>block:size (includePad)</strong>
    </dt>
    <dd>
    Returns the size of the block.
 The size of the block is the minimum rectangle which the block can be placed in,
 in the form of a table <code>{ x = width, y = height }</code>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">includePad</span>
         If <code>true</code> then the pads of the block are included
 (<strong>AxB</strong> in Fig. 1).
 If <code>nil</code> (default) or <code>false</code> the pads are not included (<strong>axb</strong> in the figure above)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of the form <code>{ x = width, y = height }</code>
    </ol>




</dd>
    <dt>
    <a name = "block:cell"></a>
    <strong>block:cell ()</strong>
    </dt>
    <dd>
    Enclosing cell.
 Returns the enclosing cell of the block.



    <h3>Returns:</h3>
    <ol>

         The enclosing cell rectangle i.e. a table of the form
 <code>{ x = cell.x, y = cell.y, w = cell.w, h = cell.h }</code>, or <code>nil</code>.
 <em>NOTE:</em> the enclosing cell is initialized
 only after the block was placed by calling its <a href="../classes/Block.html#block:place">place</a> method. Otherwise it stays <code>nil</code>.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> r = ui.<span class="function-name">Rectangle</span> {
  w = <span class="number">100</span>,
  h = <span class="number">200</span>,
}

<span class="keyword">local</span> c = r:<span class="function-name">cell</span>() <span class="comment">--&gt; c == nil
</span>
r:<span class="function-name">place</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">300</span>, <span class="number">300</span>)

<span class="keyword">local</span> c = r:<span class="function-name">cell</span>() <span class="comment">--&gt; c = { x = 10, y = 10, w = 300, h = 300 }</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "block:place"></a>
    <strong>block:place (x, y, w, h)</strong>
    </dt>
    <dd>
    Places the block within specified enclosing cell.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         x coordinate of the cell (<strong>X</strong> in the Fig. 1)
        </li>
        <li><span class="parameter">y</span>
         y coordinate of the cell (<strong>Y</strong> in the Fig. 1)
        </li>
        <li><span class="parameter">w</span>
         width of the cell (<strong>W</strong> in the Fig. 1)
        </li>
        <li><span class="parameter">h</span>
         height of the cell (<strong>H</strong> in the Fig. 1)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "block:draw"></a>
    <strong>block:draw ()</strong>
    </dt>
    <dd>
    Draws the block.
 Used to draw the block. Usually you don't want to call it on every block in your GUI - only
 once for each root element.







</dd>
    <dt>
    <a name = "block:traverse"></a>
    <strong>block:traverse ()</strong>
    </dt>
    <dd>
    Block iterator.
 Used to iterate over blocks in the hierarchy.






    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> UI = ui.<span class="function-name">Layout</span> {
  rows = <span class="number">1</span>,
  columns = <span class="number">2</span>,

  ui.<span class="function-name">Label</span> {
    text = <span class="string">'foo'</span>
  },

  ui.<span class="function-name">Label</span> {
    text = <span class="string">'bar'</span>
  }
}

<span class="keyword">for</span> i, b <span class="keyword">in</span> UI:<span class="function-name">traverse</span>() <span class="keyword">do</span>
  b.border = <span class="keyword">true</span>
<span class="keyword">end</span></pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header has-description"><a name="User_defined_blocks"></a>User defined blocks </h2>

          <div class="section-description">
           ⚠️ This section is not complete and to be done. ⚠️
          </div>
    <dl class="function">
    <dt>
    <a name = "block:doDraw"></a>
    <strong>block:doDraw ()</strong>
    </dt>
    <dd>
    A block must override this function to be drawn.  Does nothing by default.







</dd>
    <dt>
    <a name = "block:doPlace"></a>
    <strong>block:doPlace (x, y, w, h)</strong>
    </dt>
    <dd>
    Placement.
 A block should override this function to be placed.
 Used to place the block within specified enclosing cell.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         x coordinate of the window
        </li>
        <li><span class="parameter">y</span>
         y coordinate of the window
        </li>
        <li><span class="parameter">w</span>
         width of the window
        </li>
        <li><span class="parameter">h</span>
         height of the window
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2025-10-06 16:29:50 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
